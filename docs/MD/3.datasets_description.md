# Documentation des Datasets
## Syst√®me de Pr√©diction des Retards de Vols Li√©s aux Conditions M√©t√©orologiques

---

## Vue d'ensemble

Ce projet utilise trois datasets principaux pour analyser et pr√©dire les retards de vols caus√©s par les conditions m√©t√©orologiques. L'analyse s'appuie sur l'article acad√©mique **"TIST-Flight-Delay-final.pdf"**.

### Datasets disponibles

| Dataset | Lignes | Colonnes | Description |
|---------|--------|----------|-------------|
| `Flights_samples.csv` | 1 352 | 13 | Donn√©es de vols et retards |
| `Weather_samples.csv` | 80 | 44 | Observations m√©t√©orologiques horaires |
| `wban_airport_timezone.csv` | 305 | 3 | Mapping a√©roports-stations m√©t√©o |

---

## 1. Dataset des Vols (`Flights_samples.csv`)

### Vue d'ensemble
Contient les informations sur les vols planifi√©s et leurs retards effectifs.

### Colonnes principales

#### üìÖ Informations temporelles

| Colonne | Type | Description | Utilit√© ML |
|---------|------|-------------|------------|
| `FL_DATE` | String | Date du vol (format YYYY-MM-DD) | ‚úÖ Pour extraire jour/semaine |
| `CRS_DEP_TIME` | String/Int | Heure de d√©part pr√©vue (hhmm, ex: "0845") | ‚úÖ Extraire tranche horaire |

#### ‚úàÔ∏è Informations de vol

| Colonne | Type | Description | Utilit√© ML |
|---------|------|-------------|------------|
| `OP_CARRIER_AIRLINE_ID` | Int | ID num√©rique de la compagnie a√©rienne | ‚úÖ Variable cat√©gorielle |
| `OP_CARRIER_FL_NUM` | String | Num√©ro de vol dans la compagnie | üî∂ Optionnel (peut √™tre bruit) |
| `ORIGIN_AIRPORT_ID` | Int | ID de l'a√©roport d'origine | ‚úÖ Variable cat√©gorielle |
| `DEST_AIRPORT_ID` | Int | ID de l'a√©roport de destination | ‚úÖ Variable cat√©gorielle |
| `CRS_ELAPSED_TIME` | Float | Dur√©e de vol planifi√©e (minutes) | ‚úÖ Variable continue |

#### üéØ Variables cibles et filtres

| Colonne | Type | Description | Utilit√© ML |
|---------|------|-------------|------------|
| `ARR_DELAY_NEW` | Float | Retard √† l'arriv√©e (‚â• 0) | üéØ **Label cible** |
| `CANCELLED` | Float | Vol annul√© (0/1) | ‚ùå √Ä filtrer (inutile en ML) |
| `DIVERTED` | Float | Vol d√©tourn√© (0/1) | ‚ùå √Ä filtrer (inutile en ML) |

#### üå¶Ô∏è Variables de retard par cause

| Colonne | Type | Description | Utilit√© ML |
|---------|------|-------------|------------|
| `WEATHER_DELAY` | Float | Retard d√ª √† la m√©t√©o (minutes) | üî∂ Optionnel pour post-analyse |
| `NAS_DELAY` | Float | Retard syst√®me navigation (ATC, m√©t√©o mod√©r√©e, congestion) | üî∂ Optionnel pour analyse cause |

---

## 2. Dataset M√©t√©orologique (`Weather_samples.csv`)

### Vue d'ensemble
Observations horaires des conditions m√©t√©orologiques aux stations proches des a√©roports. **Total : 45 colonnes regroup√©es en 13 familles**.

---

### üå°Ô∏è TEMP√âRATURE S√àCHE (4 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `DryBulbCelsius` | Float | 834 | ‚úÖ **Temp√©rature principale** |
| `DryBulbCelsiusFlag` | String | 2 | ‚ùå √Ä ignorer |
| `DryBulbFarenheit` | Int | 187 | üî∂ Doublon, pr√©f√©rer ¬∞C |
| `DryBulbFarenheitFlag` | String | 1 | ‚ùå √Ä ignorer |

**Description** : Temp√©rature de l'air mesur√©e par thermom√®tre sec.

---

### üíß POINT DE ROS√âE (4 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `DewPointCelsius` | Float | 666 | üî∂ **Corr√©l√© √† humidit√©** |
| `DewPointCelsiusFlag` | String | 2 | ‚ùå √Ä ignorer |
| `DewPointFarenheit` | Int | 154 | üî∂ Corr√©l√© √† humidit√© |
| `DewPointFarenheitFlag` | String | 1 | ‚ùå √Ä ignorer |

**Description** : Temp√©rature du point de ros√©e (¬∞C/¬∞F). Indicateur d'humidit√©.

---

### üå°Ô∏è TEMP√âRATURE HUMIDE (4 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `WetBulbCelsius` | Float | - | üî∂ Temp√©rature avec humidit√© |
| `WetBulbCelsiusFlag` | String | - | ‚ùå √Ä ignorer |
| `WetBulbFarenheit` | Int | - | üî∂ Doublon |
| `WetBulbFarenheitFlag` | String | - | ‚ùå √Ä ignorer |

---

### üíß HUMIDIT√â RELATIVE (2 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `RelativeHumidity` | Int | 100 | ‚úÖ **Variable m√©t√©o importante** |
| `RelativeHumidityFlag` | String | 1 | ‚ùå √Ä ignorer |

**Description** : Humidit√© relative en pourcentage (%).

---

### üåßÔ∏è PR√âCIPITATIONS (2 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `HourlyPrecip` | Float | 145 | ‚úÖ **Pluie/neige ‚Üí retards** |
| `HourlyPrecipFlag` | String | 2 | ‚ùå √Ä ignorer |

**Description** : Pr√©cipitation horaire en pouces.

---

### üå™Ô∏è VENT (6 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `WindSpeed` | Int | 68 | ‚úÖ **Corr√©l√© aux perturbations** |
| `WindSpeedFlag` | String | 2 | ‚ùå √Ä ignorer |
| `WindDirection` | Int | 364 | üî∂ Moins critique |
| `WindDirectionFlag` | String | 1 | ‚ùå √Ä ignorer |
| `ValueForWindCharacter` | String | 75 | üî∂ Peut indiquer rafales |
| `ValueForWindCharacterFlag` | String | 2 | ‚ùå √Ä ignorer |

**Description** : 
- **WindSpeed** : Vitesse en n≈ìuds
- **WindDirection** : Direction (0-360¬∞)
- **ValueForWindCharacter** : Caract√®re du vent (G pour rafale)

---

### üëÅÔ∏è VISIBILIT√â (2 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `Visibility` | Float | 45 | ‚úÖ **Forte corr√©lation retards** |
| `VisibilityFlag` | String | 2 | ‚ùå √Ä ignorer |

**Description** : Visibilit√© horizontale en miles.

---

### ‚òÅÔ∏è CONDITIONS DU CIEL (2 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `SkyCondition` | String | 109041 | ‚úÖ **Cat√©gorie m√©t√©o importante** |
| `SkyConditionFlag` | String | 2 | ‚ùå √Ä ignorer |

**Description** : Couverture nuageuse (codes METAR : CLR, SCT, OVC, etc.)

---

### üå¶Ô∏è PH√âNOM√àNES M√âT√âO (2 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `WeatherType` | String | - | ‚úÖ Conditions sp√©ciales |
| `WeatherTypeFlag` | String | - | ‚ùå √Ä ignorer |

**Description** : Ph√©nom√®nes particuliers (pluie, neige, brouillard, orage).

---

### üîµ PRESSION ALTIM√âTRIQUE (2 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `Altimeter` | Float | 295 | üî∂ Faible impact direct |
| `AltimeterFlag` | String | 2 | ‚ùå √Ä ignorer |

**Description** : Pression altim√©trique pour l'aviation (inHg).

---

### üåç PRESSION ATMOSPH√âRIQUE (8 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `StationPressure` | Float | 1202 | üî∂ Moins discriminant |
| `StationPressureFlag` | String | 1 | ‚ùå √Ä ignorer |
| `SeaLevelPressure` | Float | 293 | üî∂ Moins critique |
| `SeaLevelPressureFlag` | String | 2 | ‚ùå √Ä ignorer |
| `PressureChange` | Float | 118 | üî∂ Optionnel |
| `PressureChangeFlag` | String | 1 | ‚ùå √Ä ignorer |
| `PressureTendency` | Int | 10 | üî∂ Optionnel |
| `PressureTendencyFlag` | String | 1 | ‚ùå √Ä ignorer |

**Description** : Variations barom√©triques (station, niveau mer, changement).

---

### üìä M√âTADONN√âES STATION (3 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `StationType` | Int | 6 | üî∂ Rarement utile |
| `RecordType` | String | 3 | ‚ùå √Ä ignorer |
| `RecordTypeFlag` | String | 1 | ‚ùå √Ä ignorer |

---

### ‚è∞ TEMPOREL ET G√âOGRAPHIQUE (3 colonnes)

| Colonne | Type | Valeurs distinctes | Utilit√© ML |
|---------|------|-------------------|------------|
| `Date` | Int | 31 | ‚úÖ **Cl√© temporelle** (yyyymmdd) |
| `Time` | String | 1440 | ‚úÖ **Cl√© temporelle** (hhmm) |
| `WBAN` | String | 1968 | ‚úÖ **Cl√© de jointure** |

**Description** : 
- **Date** : Date d'observation
- **Time** : Heure d'observation
- **WBAN** : Code station m√©t√©o (cl√© pour jointure)

---

## 3. Dataset de Mapping (`wban_airport_timezone.csv`)

### Vue d'ensemble
Table de correspondance entre a√©roports et stations m√©t√©orologiques.

| Colonne | Type | Description |
|---------|------|-------------|
| `AirportID` | Int | ID de l'a√©roport (correspond √† ORIGIN/DEST_AIRPORT_ID) |
| `WBAN` | Int | Code de la station m√©t√©o associ√©e |
| `TimeZone` | Int | Fuseau horaire (offset UTC) |

---

## Relations entre les Datasets

```
Flights_samples.csv
    |
    ‚îú‚îÄ ORIGIN_AIRPORT_ID ‚îÄ‚îÄ‚îê
    ‚îî‚îÄ DEST_AIRPORT_ID     ‚îÇ
                           ‚îÇ
                           ‚îú‚îÄ> wban_airport_timezone.csv
                           ‚îÇ       ‚îÇ
                           ‚îÇ       ‚îî‚îÄ WBAN ‚îÄ‚îÄ> Weather_samples.csv
                           ‚îÇ                       ‚îÇ
                           ‚îÇ                       ‚îî‚îÄ Date + Time
                           ‚îÇ
                           ‚îî‚îÄ FL_DATE + CRS_DEP_TIME (jointure temporelle)
```

---

## R√©capitulatif : Colonnes importantes pour le ML

### ‚úÖ Variables essentielles (haute priorit√©)

**Du dataset Flights :**
- `ARR_DELAY_NEW` (label cible)
- `ORIGIN_AIRPORT_ID`, `DEST_AIRPORT_ID`
- `FL_DATE`, `CRS_DEP_TIME`
- `OP_CARRIER_AIRLINE_ID`
- `CRS_ELAPSED_TIME`

**Du dataset Weather :**
- `DryBulbCelsius` (temp√©rature)
- `RelativeHumidity` (humidit√©)
- `WindSpeed` (vitesse vent)
- `Visibility` (visibilit√©)
- `SkyCondition` (couverture nuageuse)
- `HourlyPrecip` (pr√©cipitations)
- `WBAN`, `Date`, `Time` (cl√©s de jointure)

### üî∂ Variables optionnelles (moyenne priorit√©)
- `DewPointCelsius` (corr√©l√© √† humidit√©)
- `WeatherType` (ph√©nom√®nes sp√©ciaux)
- `WindDirection`
- `WEATHER_DELAY`, `NAS_DELAY` (pour analyse post-hoc)

### ‚ùå √Ä ignorer/filtrer
- Toutes les colonnes `*Flag` (indicateurs de validit√©)
- `CANCELLED`, `DIVERTED`
- Doublons temp√©rature (Farenheit si Celsius existe)

---

## Strat√©gie de jointure recommand√©e

1. **Joindre Flights avec wban_airport_timezone** sur `ORIGIN_AIRPORT_ID = AirportID`
2. **R√©cup√©rer le WBAN** de la station m√©t√©o d'origine
3. **Joindre avec Weather** sur :
   - `WBAN = WBAN`
   - `FL_DATE = Date`
   - Proche de `CRS_DEP_TIME ‚âà Time` (jointure temporelle avec fen√™tre)

---

## Notes de nettoyage

- **Filtrer** les vols annul√©s (`CANCELLED = 1`) et d√©tourn√©s (`DIVERTED = 1`)
- **Ignorer** toutes les colonnes `*Flag`
- **G√©rer les valeurs manquantes** dans les donn√©es m√©t√©o
- **Normaliser** les temp√©ratures (pr√©f√©rer Celsius)
- **Encoder** les variables cat√©gorielles (`SkyCondition`, `WeatherType`)

---

*Document g√©n√©r√© pour le projet de pr√©diction des retards de vols avec Apache Spark et Scala 2.12.18*